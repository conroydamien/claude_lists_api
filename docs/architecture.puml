@startuml architecture
title Court Lists - System Architecture

package "Android App" {
  [Compose UI] as AUI
  [MainViewModel] as AVM
  [CourtListsApi] as AAPI
  [RealtimeClient] as AWS
  [AuthManager] as AAuth
}

package "iOS App" {
  [SwiftUI Views] as IUI
  [MainViewModel] as IVM
  [CourtListsAPI] as IAPI
  [RealtimeClient] as IWS
  [AuthManager] as IAuth
}

package "Web App (Planned)" {
  [Web UI] as WUI
  [API Client] as WAPI
  [WS Client] as WWS
  [Auth Client] as WAuth
}

cloud "Supabase Backend" {
  [/listings] as Listings
  [/cases] as Cases
  [/case-status] as Status
  [/comments] as Comments
  [/watched-cases] as Watch
  [/notifications] as Notifs
  [Realtime WS] as RT

  database "PostgreSQL" {
    [users]
    [case_status]
    [comments] as ct
    [watched_cases]
    [notifications] as nt
  }
}

cloud "External" {
  [courts.ie] as Courts
  [Google OAuth] as Google
}

AUI --> AVM
AVM --> AAPI
AAPI --> AAuth
AWS --> AAuth

IUI --> IVM
IVM --> IAPI
IAPI --> IAuth
IWS --> IAuth

WUI --> WAPI
WAPI --> WAuth

AAPI --> Listings
AAPI --> Cases
AAPI --> Status
AAPI --> Comments
AAPI --> Watch
AAPI --> Notifs

IAPI --> Listings
IAPI --> Cases
IAPI --> Status
IAPI --> Comments
IAPI --> Watch
IAPI --> Notifs

WAPI --> Listings

AWS <--> RT
IWS <--> RT
WWS <--> RT

Listings --> Courts
Cases --> Courts

AAuth --> Google
IAuth --> Google
WAuth --> Google

Status --> ct
Status --> watched_cases
Status --> nt
Comments --> ct
Comments --> watched_cases
Comments --> nt
Watch --> watched_cases
Notifs --> nt

RT --> ct
RT --> nt

@enduml

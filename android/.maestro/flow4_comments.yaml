# Flow 4: Comments
# Tests opening the comments sheet for List Notes
# Prerequisites: App is launched and user is already signed in

appId: com.claudelists.app

---

# Step 1: Verify we're on the home screen
- assertVisible:
    text: "Court Lists"
    label: "Verify home screen is displayed"

# Step 2: Wait for lists to load
- extendedWaitUntil:
    visible:
      text: ".*lists"
    timeout: 15000
    label: "Wait for lists to load"

# Step 3: Tap on the first list
- tapOn:
    text: ".*"
    index: 0
    label: "Tap on the first list"

# Step 4: Verify Items screen loads
- extendedWaitUntil:
    visible:
      text: "List Notes"
    timeout: 10000
    label: "Verify items screen loaded with List Notes row"

# Step 5: Tap on the "List Notes" row to open comments
# The List Notes row is clickable and opens the comments sheet
- tapOn:
    text: "List Notes"
    label: "Tap on List Notes to open comments sheet"

# Step 6: Verify comments sheet opens
# The sheet shows "Comments" as the title
- extendedWaitUntil:
    visible:
      text: "Comments"
    timeout: 5000
    label: "Verify comments sheet opened"

# Step 7: Verify sheet contains expected elements
# Should have either comments or "No comments yet" message
- assertVisible:
    text: "No comments yet|Add a comment"
    label: "Verify comments content area is visible"

# Step 8: Verify the close button is present
- assertVisible:
    text: "Close"
    label: "Verify close button is present"

# Step 9: Close the comments sheet
- tapOn:
    text: "Close"
    label: "Tap close button to dismiss comments sheet"

# Step 10: Wait for sheet to close
- waitForAnimationToEnd

# Step 11: Verify we're back on the items screen
- assertVisible:
    text: "List Notes"
    label: "Verify returned to items screen"

# Step 12: Return to home screen
- tapOn:
    text: "Back"
    label: "Tap back to return to home screen"

# Step 13: Verify returned to home
- assertVisible:
    text: "Court Lists"
    label: "Verify returned to home screen"
